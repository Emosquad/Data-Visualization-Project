library(dplyr)
library(tidyverse)
date_range = 1:124 + as.Date("2022-02-27")
date_range = 1:124 + as.Date("2022-02-26")
date_range
format(date_range[1], format = "%m")
install.packages("comprehenr")
library(comprehenr)
date_str = to_list(for (i in date_range)
str(format(i), format = "%Y") +
str(format(i), format = "%m") + str(format(i), format = "%d"))
date_str = to_vec(for (i in date_range)
str(format(i), format = "%Y") +
str(format(i), format = "%m") + str(format(i), format = "%d"))
str(format(date_range[1]), format = "%Y") +
str(format(date_range[1]), format = "%m") + str(format(date_range[1]), format = "%d")
str(format(date_range[1]), format = "%Y") + str(format(date_range[1]), format = "%m") + str(format(date_range[1]), format = "%d")
str(format(date_range[1]), format = "%Y")
format(date_range[1]), format = "%Y"
format(date_range[1], format = "%Y")
str(format(date_range[1], format = "%Y"))
str(format(i, format = "%Y")) +
str(format(i, format = "%m")) + str(format(i, format = "%d"))
date_str = to_vec(for (i in date_range)
str(format(i, format = "%Y")) +
str(format(i, format = "%m")) + str(format(i, format = "%d")))
date_str = to_list(for (i in date_range)
str(format(i, format = "%Y")) +
str(format(i, format = "%m")) + str(format(i, format = "%d")))
View(date_str)
str(format(date_range[1], format = "%Y")) +
str(format(date_range[1], format = "%m")) + str(format(date_range[1], format = "%d"))
date_str = to_list(for (i in date_range)
paste(str(format(i, format = "%Y")),
str(format(i, format = "%m")),str(format(i, format = "%d"))))
View(date_str)
date_str <- vector(mode = "list", length = 124)
View(date_str)
paste(str(format(i, format = "%Y")), str(format(i, format = "%m")),str(format(i, format = "%d")))
paste(str(format(date_range[1], format = "%Y")), str(format(date_range[1], format = "%m")),str(format(date_range[1], format = "%d")))
paste(as.character(format(date_range[1], format = "%Y")), as.character(format(date_range[1], format = "%m")),as.character(format(date_range[1], format = "%d")))
paste0(as.character(format(date_range[1], format = "%Y")), as.character(format(date_range[1], format = "%m")),as.character(format(date_range[1], format = "%d")))
date_str = to_list(for (i in date_range)
paste0(
as.character(format(i, format = "%Y")),
as.character(format(i, format = "%m")),
as.character(format(i, format = "%d"))
))
View(date_str)
date_str = to_vec(for (i in date_range)
paste0(
as.character(format(i, format = "%Y")),
as.character(format(i, format = "%m")),
as.character(format(i, format = "%d"))
))
paste0(
as.character(format(i, format = "%Y")),
as.character(format(i, format = "%m")),
as.character(format(i, format = "%d"))
)
paste0(
as.character(format(i, format = "%Y")),
as.character(format(i, format = "%m")),
as.character(format(i, format = "%d"))
)}
paste0(
as.character(format(i, format = "%Y")),
as.character(format(i, format = "%m")),
as.character(format(i, format = "%d")))}
date_str = vector(mode = "list", length = 124)
View(date_str)
for (i in date_range) {
date_str <- c(date_str, paste0(
as.character(format(i, format = "%Y")),
as.character(format(i, format = "%m")),
as.character(format(i, format = "%d"))))
}
View(date_str)
date_str = vector(mode = "list", length = 124)
for (i in date_range) {
date_str <- c(date_str, paste0(
as.character(format(i, format = "%Y")),
as.character(format(i, format = "%m")),
as.character(format(i, format = "%d"))))
}
View(date_str)
date_range = 1:124 + as.Date("2022-02-26")
for (i in date_range) {
date_str <- c(date_str, paste0(
as.character(format(i, format = "%Y")),
as.character(format(i, format = "%m")),
as.character(format(i, format = "%d"))))
}
for (i in date_range) {
date_str <- c(date_str, paste0(
as.character(format(i, format = "%Y")),
as.character(format(i, format = "%m")),
as.character(format(i, format = "%d"))))
}
date_str = c()
for (i in 1:124) {
date_str <- c(date_str, paste0(
as.character(format(date_range[i], format = "%Y")),
as.character(format(date_range[i], format = "%m")),
as.character(format(date_range[i], format = "%d"))))
}
for (s in 1:124) {
file_name = paste0(path,date_str[s],"_city.xlsx")
}
path = "./district/"
for (s in 1:124) {
file_name = paste0(path,date_str[s],"_city.xlsx")
}
df_seperate = read.csv(file_name)
install.packages("readxl")
install.packages("readxl")
library(readxl)
for (s in 1:124) {
file_name = paste0(path,date_str[s],"_city.xlsx")
df_seperate = read_xlsx(file_name)
}
View(df_seperate)
typeof(df_seperate)
df <- c()
for (s in 1:124) {
file_name = paste0(path,date_str[s],"_city.xlsx")
df_seperate = read_xlsx(file_name)
df <- c(df, df_seperate)
}
View(df)
install.packages("purrr")
library(readxl)
library(purrr)
df <- purrr::flatten(df)
View(df)
View(df_seperate)
typeof(df_seperate)
file_name = paste0(path,date_str[1],"_city.xlsx")
df <- read_xlsx(file_name)
View(df)
View(df_seperate)
df <- rbind(df, df_seperate)
df <- bind_rows(df, df_seperate)
df <- dplyr::bind_rows(df, df_seperate)
View(df)
file_name = paste0(path,date_str[1],"_city.xlsx")
df <- read_xlsx(file_name)
for (s in 2:124) {
file_name = paste0(path,date_str[s],"_city.xlsx")
df_seperate = read_xlsx(file_name)
df <- dplyr::bind_rows(df, df_seperate)
}
View(df)
View(df)
df[is.na(df)] = 0
View(df)
# District data set
file_name = paste0(path,date_str[20],"_dis.xlsx")
df <- read_xlsx(file_name)
for (s in 2:124) {
file_name = paste0(path,date_str[s],"_dis.xlsx")
df_seperate = read_xlsx(file_name)
df <- dplyr::bind_rows(df, df_seperate)
}
# District data set
file_name = paste0(path,date_str[20],"_dis.xlsx")
df <- read_xlsx(file_name)
for (s in 21:124) {
file_name = paste0(path,date_str[s],"_dis.xlsx")
df_seperate = read_xlsx(file_name)
df <- dplyr::bind_rows(df, df_seperate)
}
View(df)
df[is.na(df)] = 0
date_range[94]
library(tidyverse)
library(dplyr)
library(comprehenr)
library(readxl)
library(purrr)
date_range = 1:124 + as.Date("2022-02-26")
date_str = c()
for (i in 1:124) {
date_str <- c(date_str, paste0(
as.character(format(date_range[i], format = "%Y")),
as.character(format(date_range[i], format = "%m")),
as.character(format(date_range[i], format = "%d"))))
}
# City data set
path = "./district/"
file_name = paste0(path,date_str[1],"_city.xlsx")
df_city <- read_xlsx(file_name)
for (s in 2:124) {
file_name = paste0(path,date_str[s],"_city.xlsx")
df_seperate = read_xlsx(file_name)
df_city <- dplyr::bind_rows(df_city, df_seperate)
}
df[is.na(df)] = 0
for (s in 2:124) {
file_name = paste0(path,date_str[s],"_city.xlsx")
df_seperate = read_xlsx(file_name)
df_city <- dplyr::bind_rows(df_city, df_seperate)
}
df_city[is.na(df)] = 0
df_city[is.na(df_city)] = 0
# District data set
file_name = paste0(path,date_str[20],"_dis.xlsx")
df_district <- read_xlsx(file_name)
for (s in 21:124) {
file_name = paste0(path,date_str[s],"_dis.xlsx")
df_seperate = read_xlsx(file_name)
df_district <- dplyr::bind_rows(df_district, df_seperate)
}
df[is.na(df)] = 0
# Individual data set
path = "./community/"
file_name = paste0(path,date_str[8],"_geo.xlsx")
df_ind <- read_xlsx(file_name)
for (s in 8:94) {
file_name = paste0(path,date_str[s],"_geo.xlsx")
df_seperate = read_xlsx(file_name)
df_ind <- dplyr::bind_rows(df_ind, df_seperate)
}
View(df_ind)
df_ind[is.na(df_ind)] = 0
file_name = paste0(path,date_str[s],"_geo.xlsx")
for (s in 8:94) {
file_name = paste0(path,date_str[s],"_geo.xlsx")
df_seperate = read_xlsx(file_name)
df_ind <- dplyr::bind_rows(df_ind, df_seperate)
}
View(df_ind)
View(df_seperate)
View(df_ind)
dplyr::bind_rows(df_ind, df_seperate)
typeof(df_ind$日期)
typeof(df_ind$地址)
typeof(df_seperate$地址)
typeof(df_seperate$日期)
typeof(df_ind$性别)
typeof(df_seperate$性别)
typeof(df_ind$年龄)
typeof(df_seperate$年龄)
library(stringr)
str_detect(df_ind$年龄, "月")
View(df_ind)
df_ind$年龄[str_detect(df_ind$年龄, "月")] == 0
df_ind$年龄[str_detect(df_ind$年龄, "月")] = 0
typeof(df_ind$年龄)
df_ind %>%
mutate(年龄 = as.numeric(年龄))
df_ind = df_ind %>%
mutate(年龄 = as.numeric(年龄))
typeof(df_ind$年龄)
# Individual data set
path = "./community/"
file_name = paste0(path,date_str[8],"_geo.xlsx")
df_ind <- read_xlsx(file_name)
df_ind$年龄[str_detect(df_ind$年龄, "月")] = 0
df_ind = df_ind %>%
mutate(年龄 = as.numeric(年龄))
for (s in 8:94) {
file_name = paste0(path,date_str[s],"_geo.xlsx")
df_seperate = read_xlsx(file_name)
df_seperate$年龄[str_detect(df_seperate$年龄, "月")] = 0
df_seperate = df_seperate %>%
mutate(年龄 = as.numeric(年龄))
df_ind <- dplyr::bind_rows(df_ind, df_seperate)
}
View(df_seperate)
View(df_ind)
View(df_seperate)
# Individual data set
path = "./community/"
file_name = paste0(path,date_str[8],"_geo.xlsx")
df_ind <- read_xlsx(file_name)
df_ind$性别 <- NULL
df_ind$年龄 <- NULL
df_ind$类型 <- NULL
for (s in 8:94) {
file_name = paste0(path,date_str[s],"_geo.xlsx")
df_seperate = read_xlsx(file_name)
df_ind$性别 <- NULL
df_ind$年龄 <- NULL
df_ind$类型 <- NULL
df_ind <- dplyr::bind_rows(df_ind, df_seperate)
}
View(df_ind)
View(df_seperate)
typeof(df_seperate$日期)
typeof(df_seperate$地址)
typeof(df_seperate$区)
typeof(df_seperate$经度)
typeof(df_seperate$纬度)
typeof(df_ind$日期)
typeof(df_ind$地址)
typeof(df_ind$区)
typeof(df_ind$经度)
typeof(df_ind$纬度)
df_ind = df_ind %>%
mutate(经度 = as.numeric(经度)) %>%
mutate(纬度 = as.numeric(纬度))
# Individual data set
path = "./community/"
file_name = paste0(path,date_str[8],"_geo.xlsx")
df_ind <- read_xlsx(file_name)
df_ind$性别 <- NULL
df_ind$年龄 <- NULL
df_ind$类型 <- NULL
df_ind = df_ind %>%
mutate(经度 = as.numeric(经度)) %>%
mutate(纬度 = as.numeric(纬度))
for (s in 8:94) {
file_name = paste0(path,date_str[s],"_geo.xlsx")
df_seperate = read_xlsx(file_name)
df_seperate$性别 <- NULL
df_seperate$年龄 <- NULL
df_seperate$类型 <- NULL
df_seperate = df_seperate %>%
mutate(经度 = as.numeric(经度)) %>%
mutate(纬度 = as.numeric(纬度))
df_ind <- dplyr::bind_rows(df_ind, df_seperate)
}
View(df_ind)
shiny::runApp()
View(df_city)
colnames(df_city) <- c('Date', 'Total', 'Positive', 'Asymptomatic',
'Asymptomatic_to_Positive', 'Deaths')
colnames(df_district) <- c('Districts', 'Positive', 'Asymptomatic', 'Date')
colnames(df_ind) <- c('Date', 'Address', 'Districts', 'Longtitude', 'Latitude')
shiny::runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
